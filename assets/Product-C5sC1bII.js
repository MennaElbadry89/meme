import{u as C,r as n,a as p,w as b,c as w,j as t,S as u,V as N}from"./index-CgxueZb7.js";import{f as i,F as B,a as y}from"./index-Cek4v15u.js";function F({value:e}){const x=C(),{currentUser:m}=n.useContext(p),{addToWishList:f}=n.useContext(b),{addToCart:h,cartIdes:o}=n.useContext(w);console.log(o);const[r,c]=n.useState(!1),j=e.price-e.price*e.discount/100,s={...e,amount:o[e.id]?o[e.id]:0},g=a=>{if(!m){u.fire({title:"Authentication Required",text:"Please login or register to add items to cart",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Go to Register",cancelButtonText:"Cancel"}).then(d=>{d.isConfirmed&&x("/register")});return}const l=h(a.id,!0);l.success?(c(!0),setTimeout(()=>{o[a.id]===1?u.fire({title:"successfull operation",text:"click the button",icon:"success",timer:1500,showConfirmButton:"false"}):N.success(`You have ${o[a.id]} of this product`)},1500)):l.needsAuth&&u.fire({title:"Authentication Required",text:l.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Go to Register",cancelButtonText:"Cancel"}).then(d=>{d.isConfirmed&&x("/register")})};return n.useEffect(()=>{r&&(c(!0),setTimeout(()=>{c(!1)},500))},[r]),t.jsx(t.Fragment,{children:t.jsx("div",{className:"col-lg-3 col-md-6 col-sm-12",children:t.jsxs("div",{className:"card border-2 shadow",children:[t.jsx("div",{className:"flex p-2",style:{overflow:"hidden"},children:t.jsx("img",{className:"w-100",src:s.image,style:{height:"240px"},alt:""})}),t.jsxs("div",{className:"card-body flex flex-column gap-1",children:[t.jsxs("b",{className:"fs-4 text-center d-block opacity-50",children:[" ",s.catogery]}),t.jsxs("p",{className:"fw-bold m-0 ",style:{color:"var(--main-color"},children:[" ",j,"$",t.jsxs("del",{className:"fw-bold m-0 text-danger opacity-50",children:["  ",s.discount,"%"]})]}),t.jsxs("div",{className:"text-warning h5",children:[t.jsx(i,{}),t.jsx(i,{}),t.jsx(i,{}),t.jsx(i,{}),t.jsx(i,{})]}),t.jsxs("div",{className:"procces flex justify-content-between w-100",children:[t.jsx("button",{className:"btn",onClick:()=>f(e),children:t.jsx(B,{style:{color:"var(--main-color",cursor:"pointer"}})}),t.jsx("button",{className:"btn",disabled:s.stock-s.amount==0||r,onClick:()=>g(s),children:r?t.jsx("div",{children:t.jsx("div",{className:"spinner-border text-primary"})}):t.jsx(y,{style:{color:"var(--main-color",cursor:"pointer"}})})]})]})]})})})}export{F as P};
