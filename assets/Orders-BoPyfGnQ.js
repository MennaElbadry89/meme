import{r as a,a as y,j as e,h as j,N as g,i as p}from"./index-CgxueZb7.js";function v(){const{loadingDisplayCurrentUser:d,currentUser:i}=a.useContext(y),[l,n]=a.useState([]),[m,c]=a.useState(!0),[o,h]=a.useState(null);return a.useEffect(()=>{if(!i)return;let s=!1;return(async()=>{try{c(!0),h(null);const t=await p.get("http://localhost:3003/orders",{params:{userId:i.id}});if(!s){const r=Array.isArray(t.data)?t.data:[];n(r)}}catch{s||(h("Failed to load orders"),n([]))}finally{s||c(!1)}})(),()=>{s=!0}},[i]),d?e.jsx(j,{status:"page"}):!d&&!i?e.jsx(g,{to:"/login"}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"Orders container mb-5",children:[e.jsxs("p",{className:"text-center h2 my-5",children:["Your ",e.jsx("span",{style:{color:"var(--secondry-color)"},children:"Orders"})]}),m?e.jsx(j,{status:"page"}):o?e.jsx("div",{className:"alert alert-danger",children:o}):Array.isArray(l)&&l.length>0?e.jsx("div",{className:"row g-3",children:l.map(s=>{const x=Array.isArray(s.items)?s.items:[],t=s.total;return e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Order ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Total:"})," ",t,"$"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Amount"})]})}),e.jsx("tbody",{children:x.map((r,u)=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"64px"},children:e.jsx("img",{src:r.image,alt:"",style:{width:"60px",height:"60px",objectFit:"cover"}})}),e.jsx("td",{children:r.catogery||r.title||`Item #${r.id}`}),e.jsxs("td",{children:[r.price,"$"]}),e.jsx("td",{children:r.amount})]},u))})]})})]})})},s.id)})}):e.jsx("div",{className:"text-center opacity-75",children:"You have no orders yet."})]})})}export{v as default};
